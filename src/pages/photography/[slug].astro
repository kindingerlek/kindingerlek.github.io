---
export const prerender = true

import type { GetStaticPaths, InferGetStaticPropsType } from 'astro'

import ContentPostLayout from '@/layouts/ContentPostLayout.astro'
import PhotoCollection from '@/collections/photos'
import type { Config } from '@/types/data'
import PhotoPostLayout from '@/layouts/PhotoPostLayout.astro'

export const getStaticPaths = (async () => {
	const projectEntries = await PhotoCollection.getAll()
	return projectEntries.map((entry) => ({
		params: { slug: entry.slug },
		props: { entry }
	}))
}) satisfies GetStaticPaths

type Props = InferGetStaticPropsType<typeof getStaticPaths>

const { entry } = Astro.props
const { Content } = await entry.render()

const meta = {
	description: entry.data.description,
	title: entry.data.title
} as Config['meta']
---

<PhotoPostLayout content={entry} meta={meta} urlRoot='/photography'>
	<Content />
</PhotoPostLayout>

<!-- <ContentPostLayout content={entry} meta={meta} urlRoot='/photography'>
	<Content />
</ContentPostLayout> -->
