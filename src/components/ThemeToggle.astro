---
import Icon from './Icon.astro'
---

<button
	id='toggleDarkMode'
	class='relative rounded-md border border-border p-1.5 transition-all hover:bg-border'
>
	<Icon
		class='h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:hidden dark:-rotate-90 dark:scale-0'
		name='ri:moon-fill'
		size={16}
	/>
	<Icon
		class='hidden h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:block dark:rotate-0 dark:scale-100'
		name='ri:sun-line'
		size={16}
	/>
</button>

<script>
	function getCurrentTheme() {
		return localStorage.getItem('theme')
	}
	const toggleDarkModeButton = document.getElementById('toggleDarkMode')

	toggleDarkModeButton?.addEventListener('click', () => {
		const toggleDarkModeEvent = new CustomEvent('theme-change', {
			detail: { theme: getCurrentTheme() === 'light' ? 'dark' : 'light' }
		})
		document.dispatchEvent(toggleDarkModeEvent)
	})
</script>
